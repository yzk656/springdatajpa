<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- 其他元标记和样式表 -->

    <link href="https://unpkg.com/@wangeditor/editor@latest/dist/css/style.css" rel="stylesheet">
    <style>
        #editor—wrapper {
            border: 1px solid #ccc;
            z-index: 100; /* 按需定义 */
        }
        #editor-container { height: 500px; }
    </style>
</head>
<body>
<!-- 其他页面内容 -->

<div id="app">
    <el-container>
        <el-main>
            <h1>邮件详情</h1>
            <div>
                <p><strong>发件人：</strong>{{ email.sender }}</p>
                <p><strong>标题：</strong>{{ email.title }}</p>
                <p><strong>邮件内容：</strong></p>
                <!-- 使用 wangEditor 富文本编辑器容器 -->
                <div id="editor-container"></div>
            </div>
        </el-main>
    </el-container>
</div>

<script src="https://unpkg.com/@wangeditor/editor@latest/dist/index.js"></script>

<script>
    const { createEditor, createToolbar } = window.wangEditor

    const editorConfig = {
        placeholder: 'Type here...',
        onChange(editor) {
            const html = editor.getHtml()
            console.log('editor content', html)
            // 也可以同步到 <textarea>
        }
    }

    const editor = createEditor({
        selector: '#editor-container',
        html: '<p><br></p>',
        config: editorConfig,
        mode: 'default', // or 'simple'
    })

    const toolbarConfig = {}

    const toolbar = createToolbar({
        editor,
        selector: '#toolbar-container',
        config: toolbarConfig,
        mode: 'default', // or 'simple'
    })

    // 使用 JavaScript 获取查询参数中的邮件ID
    const urlParams = new URLSearchParams(window.location.search);
    const emailId = urlParams.get('id');

    new Vue({
        el: '#app',
        data: {
            email: {
                sender: '',
                title: ''
            }
        },
        created() {
            this.fetchEmails(emailId);
        },
        methods: {
            fetchEmails(emailId) {
                // 使用 Axios 或其他 AJAX 库发送请求获取邮件数据
                axios.get(`http://localhost:8080/email/detail?id=${emailId}`)
                    .then(response => {
                        this.email = response.data;
                        // 在 wangEditor 中设置邮件内容
                        editor.txt.html(this.email.content);
                    })
                    .catch(error => {
                        console.error('获取邮件数据失败：', error);
                    });
            }
        }
    });
</script>
</body>
</html>
